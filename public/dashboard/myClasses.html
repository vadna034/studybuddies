<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title></title>
    <meta name="description" content="yeah" />
    <meta name="keywords" content="yeah" />
    <meta name="author" content="Shane Vadnais" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" type="text/css" href="/main.css" />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
      integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN"
      crossorigin="anonymous"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.bundle.min.js"></script>
  </head>
  <body>
    <section id="sideMenu">
      <nav>
        <a href="home"><i class="fa fa-home"></i>Home</a>
        <a href="addClasses">Add Classes</a>
        <a href="myClasses" class="active">My Classes</a>
        <a href="myGroups">My Groups</a>
      </nav>
    </section>

    <header>
      <div class="search-area">
        <div>
          <i class="fa fa-search"></i>
          <input type="text" name="" value="" />
        </div>
      </div>

      <div class="user-area">
        <a href="#" class="add">+ add</a>
        <a href="#" class="notification">
          <i class="fa fa-bell-o" aria-hidden="true"></i>
          <span class="circle">3</span>
        </a>
        <a href="#">
          <div class="user-img"></div>
          <i class="fa fa-caret-down" aria-hidden="true"></i>
        </a>
      </div>
    </header>

    <div class="dash" id="mainClass">
      <table class="table table-dark" id="classTable">
        <thead>
          <tr>
            <th scope="col" class="text-center">Term</th>
            <th scope="col" class="text-center">Code</th>
            <th scope="col" class="text-center">Section</th>
            <th scope="col" class="text-center">Page</th>
            <th scope="col" class="text-center"></th>
          </tr>
        </thead>
      </table>
    </div>

    <form action="route" method="POST">
      <button value="?"></button>
    </form>

    <script>
      var submit = function () {};

      $(document).ready(() => {
        var table = $("classTable")[0];

        fetch("/getClasses", {
          method: "POST",
        })
          .then((response) => response.text())
          .then((data) => {
            console.log(data);
            var classes = JSON.parse(data);
            console.log(classes);
            if (classes.length != 0) {
              var table = $("#classTable")[0];

              classes.forEach((c) => {
                var addRow = table.insertRow();
                console.log(c);

                if (c.section === "0") {
                  c.section = "";
                }

                var termCell = addRow.insertCell(0);
                termCell.innerHTML = c.term;
                var codeCell = addRow.insertCell(1);
                codeCell.innerHTML = c.code;
                var IDCell = addRow.insertCell(2);
                IDCell.innerHTML = c.section;
                var pageCell = addRow.insertCell(3);
                pageCell.innerHTML = "";
                var delCell = addRow.insertCell(4);

                delCell.innerHTML =
                  '<form name = "deleteClass" method = "POST"><button type="button" class="btn btn-danger" value = \'' +
                  JSON.stringify(c) +
                  "'>Leave</button></form>";
              });
            } else {
              console.log("here");
              $("#mainClass")[0].innerHTML =
                "<h> You don't have any classes yet? Add some? <h>";
            }
          })
          .catch((error) => {
            console.error("Error: ", error);
          });
      });
    </script>
  </body>
</html>
